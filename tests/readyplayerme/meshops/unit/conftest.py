"""Pytest fixtures for meshops unit tests."""
import numpy as np
import pytest

from readyplayerme.meshops.mesh import Mesh


@pytest.fixture
def mock_mesh():
    """Return a mocked instance of a mesh."""
    vertices = np.array(
        [
            [-1.0, -1.0, 1.0],
            [-1.0, 1.0, 1.0],
            [-1.0, -1.0, -1.0],
            [-1.0, 1.0, -1.0],
            [1.0, -1.0, 1.0],
            [1.0, 1.0, 1.0],
            [1.0, -1.0, -1.0],
            [1.0, 1.0, -1.0],
            [1.0, 0.0, 1.0],
            [1.0, 0.0, -1.0],
            [1.0, 0.0, -1.0],
        ]
    )
    edges = np.array(
        [
            [9, 2],
            [2, 3],
            [3, 9],
            [3, 7],
            [7, 9],
            [9, 3],
            [7, 8],
            [8, 10],
            [10, 7],
            [8, 5],
            [5, 1],
            [1, 8],
            [3, 5],
            [5, 7],
            [7, 3],
            [1, 2],
            [2, 0],
            [0, 1],
            [3, 1],
            [1, 5],
            [5, 3],
            [9, 6],
            [6, 2],
            [2, 9],
            [1, 3],
            [3, 2],
            [2, 1],
            [7, 5],
            [5, 8],
            [8, 7],
            [8, 0],
            [0, 4],
            [4, 8],
            [10, 8],
            [8, 4],
            [4, 10],
            [8, 1],
            [1, 0],
            [0, 8],
        ]
    )
    faces = np.array(
        [
            [9, 2, 3],
            [3, 7, 9],
            [7, 8, 10],
            [8, 5, 1],
            [3, 5, 7],
            [1, 2, 0],
            [3, 1, 5],
            [9, 6, 2],
            [1, 3, 2],
            [7, 5, 8],
            [8, 0, 4],
            [10, 8, 4],
            [8, 1, 0],
        ]
    )
    uv = np.array(
        [
            [0.0000885235713, 0.108867466],
            [0.376611322, 0.384406567],
            [0.0000885531263, 0.842295170],
            [0.417839319, 0.500414848],
            [0.650038540, 0.0000885725021],
            [0.482583314, 0.375091314],
            [0.706107318, 0.999911427],
            [0.540375590, 0.470338583],
            [0.541970432, 0.256122291],
            [0.736137152, 0.735312700],
            [0.869261205, 0.525972605],
        ]
    )
    return Mesh(vertices=vertices, edges=edges, faces=faces, uv_coords=uv)


@pytest.fixture
def mocked_image_diagonal_line_rgb():
    """Return an image with 1 diagonal line of lerped rgb colors."""
    return np.array(
        [
            [[0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0]],
            [[0, 0, 0], [255, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0]],
            [[0, 0, 0], [0, 0, 0], [170, 85, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0]],
            [[0, 0, 0], [0, 0, 0], [0, 0, 0], [85, 170, 0], [0, 0, 0], [0, 0, 0]],
            [[0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 255, 0], [0, 0, 0]],
            [[0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0]],
        ],
        dtype=np.uint8,
    )


@pytest.fixture
def mocked_image_diagonal_line_grayscale():
    """Return an image with 1 diagonal line of lerped grayscale colors."""
    return np.array(
        [
            [0, 0, 0, 0, 0, 0],
            [0, 255, 0, 0, 0, 0],
            [0, 0, 191, 0, 0, 0],
            [0, 0, 0, 127, 0, 0],
            [0, 0, 0, 0, 63, 0],
            [0, 0, 0, 0, 0, 0],
        ],
        dtype=np.uint8,
    )
